.. _change_log:

=========
Changelog
=========

[0.1.4] - 2020-05-22
---------------------

    - Замена null на [] в /api/v1/user/info/ поле albums


[0.1.3] - 2020-04-28
---------------------

    - исправлена логика обработки ошибок от vk api при приватном профиле или альбоме пользователя
    - добавлена обработка альбомов из групп
    - добавлены расчёты метрик в дашборд
    - добавлены признаки приватности в модели Альбома и Автора

[0.1.2] - 2020-04-21
---------------------

    - добавлен механизм бекапов
    - fix: ошибка масштабирования worker's


[0.1.1] - 2020-04-19
---------------------

    - подключен поиск от tineye

[0.0.29] - 2020-04-15
---------------------

    - поле album_id добавлено в результаты выдачи по фотографиям ``album/photos/`` и ``album/photo_stats/``

[0.0.28] - 2020-04-14
---------------------

    - добавлен метод ``billing/subscription/expand`` для доавбления альбомов в подписку

[0.0.27] - 2020-04-13
---------------------

    - добавлен метод photo_stats
    - добавлена сортировка в фотографии альбома по числу результатов

[0.0.26] - 2020-04-13
---------------------

    - добавлен ручной запуск платной подписки из админки
    - fix: пока для всех фото search_allowed True
    - для удобства в админку добавлены поля
    - fix: баг в группировке EngineCounter
    - уточнены текстовые результаты работы worker
    - добавлено логирование исключительных ситуаций

[0.0.25] - 2020-04-11
---------------------

    - объединение методов /photos и /photo_stats
    - добавлены тесты на объединенный метод
    - объединение методов user/info/ и user/album_stats/

[0.0.24] - 2020-04-10
---------------------

    - метод photo_stats переписан на обработку списка фотографий
    - добалены тесты на photo_stats
    - fix: добавлено заполнение src_id при создании фотографий
    - fix: album_stats не присылает альбомы, на которые нет подписки

[0.0.23] - 2020-04-06
---------------------

    - fix get_photo_results error

[0.0.22] - 2020-03-20
---------------------

    - добавлен метод ``/api/v1/album/photo_stats`` возвращающий результаты по фото из альбома


[0.0.21] - 2020-03-20
---------------------

    - добавлен метод ``/api/v1/user/album_stats/`` возвращающий статистику по альбомам пользователя

[0.0.20] - 2020-03-17
---------------------

    - добавлена статистика по поиску
    - fix: исправлен расчёт числа результатов в EngineCounter
    - добавлена библиотека TinEye и вывод оплаченных поисков в дашборд

[0.0.19] - 2020-03-16
---------------------

    - fix: сохранение статистики запросов (повышена детализация + защита от рассинхрона счётчиков при параллельной работе)
    - fix: повышение уровня детализации в фиксации ошибок
    - пропуск поиска по фото если нет "большой" фотки (максимального размера)
    - включена независимая обработка фотографий (сбой по одной не останавливает обработку альбома)
    - fix: DomainData.MultipleObjectsReturned error

[0.0.18] - 2020-03-15
---------------------

    - fix: множественные ошибки выявленные при отладке
    - добавлена обработка ошибок при работе с vk api
    - user_info теперь возвращает ИД альбомов VK как int
    - добавлена проверка, что альбом скрыт (выдаём ошибку 2004)

[0.0.17] - 2020-03-15
---------------------

    - fix: ошибка при работе с пустым альбомом без фото и обложки
    - отлажена страница статистики

[0.0.16] - 2020-03-14
---------------------

    - добавлена страница со статистикой в админке
    - уточнена логика фиксации статистики
    - подключен платный поиск, с первым выполнением после оплаты
    - добавлена задача для возможности ежедневного запуска проверки подписок
    - добавлены методы защиты от поисков сверх оплаченного лимита

[0.0.15] - 2020-03-13
---------------------

    - добавлен метод ``/api/v1/album/photos/`` возвращающий список фото с пагинацией
    - исправлен метод фонового обновления фото в альбоме
    - упрощено поле ``user_albums`` в ``/api/v1/user/info/``

[0.0.14] - 2020-03-12
---------------------

    - в данные о подписке добавлена информация о списке альбомов
    - в метод user_info добавлен запуск фонового обновления списка фото в оплаченных альбомах
    - добавлено сохранение пользователя в альбом после регистрации через VK
    - удалён отдельный метод возвращающий статус подписки
    - обновление Django, vk-api
    - защита от неверного типа данных в ИД альбома

[0.0.13] - 2020-03-01
---------------------

    - Коды ошибок заменены на цифровые, описание добавлено в документацию
    - most_copied_photo теперь содержит сразу url картинки
    - fix: не менять обложку на больший размер если не удалось достать url большой картинки по id
    - fix: обработка url для подтверждения платежа от Яндекса (``billing/ym/notify/``)

[0.0.12] - 2020-03-01
---------------------

    - Уточнена логика метода ``/api/v1/user/info/``
    - Добавлено получение большой фото для обложки альбома


[0.0.11] - 2020-02-29
---------------------

    - Добавлен метод возвращающий информацию по авторизованному пользователю


[0.0.10] - 2020-02-19
---------------------

    - Исправлена ошибка со статусом альбома после бесплатного поиска


[0.0.9] - 2020-01-04
--------------------

    - Добавлен биллинг на базе Яндекс.Деньги
    - Добавлен метод ``billing/tariffs/`` для получения тарифов
    - Добавлен метод ``/api/v1/billing/create_invoice/`` создание счёта для пользователя
    - Добавлен метод ``/api/v1/billing/invoice/`` для проверки оплаты счёта
    - Добавлен метод ``/api/v1/billing/subscription/`` для получения активной подписки
    - Правка ситуации с потерей связи между nginx и сервисами при деплое


[0.0.8] - 2020-01-03
--------------------

    - Повышение стабильности прода
    - Добавлен метод ``api/v1/albums/`` для получения альбомов авторизованного пользователя


[0.0.7] - 2019-11-22
--------------------

    - Добавлена технология проверки похожести фотографий на основе модели машинного обучения и машинного зрения

[0.0.6] - 2019-10-31
--------------------

    - Добавлены поля в модель Album для отслеживания прогресса
    - Добавлен метод ``api/v1/album_results/``
    - Добавлен поисковый движек по ВКонтакте

[0.0.5] - 2019-10-22
--------------------

    - Изменены модели (миграции сброшены)
    - Добавлен метод ``api/v1/album_processing/``
    - Асинхронное выполнение задач (Celery)

[0.0.4] - 2019-10-16
--------------------

    - Добавлен файл post_update.sh для выполнения миграций при деплое
    - Подём версии django (security)
    - Добавлен URL для OAuth VK
    - Исправлена ошибка при запросе от авторизованного пользователя без профиля

[0.0.3] - 2019-10-14
--------------------

    - Добавлен метод поиска картинок по VK
    - Добавление worker на Celery
    - Настройка Gitlab CI
    - Подключение к Sentry
    - Настройка Gunicorn

[0.0.2] - 2019-09-14
--------------------

    - Получение первых дупликатов из Google Cloude API

[0.0.1] - 2019-09-03
--------------------

    - Initial commit
