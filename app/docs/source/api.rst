Описание методов API
====================

Общая автодокументация: https://ohaoha.ru/api/v1/docs/swagger/

Бесплатная проверка
-------------------

api url ``/api/v1/album_processing/``

**Описание логики**

Валидирует url и ставит на выполнение поиска валидные альбомы


Результаты бесплатной проверки
------------------------------

api url ``/api/v1/album_results/``

**Описание логики метода**

- либо возвращает ошибку валидации url (HTTP_400)
- либо возвращает другой url (HTTP_303) если ранее уже был обработан другой альбом этого пользоватлея
- либо возвращает статистику по прогрессу (HTTP_200)
- либо возвращает итоговый результат по одной "лучшей фото" (HTTP_200)
- либо возвращает сообщает что дубликатов по первым (20) фото не найдено (HTTP_200)


Информация о пользователе
-------------------------

api url ``/api/v1/user/info/``

**Описание логики метода**

HTTP_200 Обновляет через VK API, скачивает обложки, возвращает достпную информацию о пользователе:
 - Имя
 - Фамилию
 - Фото профиля
 - Статус подписки (если есть)
 - Информацию по альбомам (если есть)
и запускает в фоне обновление списка фотографий в альбоме

- либо возвращает ошибку доступа (HTTP_403)

Фотографии в альбоме
--------------------

POST api url ``/api/v1/album/photos/``

возможна пагинация через параметры: limit, offset

**Описание логики метода**

Полные данные в БД будет только по оплаченным альбомам

HTTP_200
source_id - ИД фото в VK
mini_url - url миниатюры для интерфейса
results_count - число найденных и проверенных результатов по фото
in_progress - признак выполняемого первого поиска


Статистика по альбому
--------------------

POST api url ``/api/v1/user/album_stats/``

**Описание логики метода**

Метод возвращает список альбомов пользователя со статистикой

HTTP_200
search_done - статус поиска, True если завершён первый поиск
site_count - число сайтов используют ваши фотографии
found_count - фотографий используют сайты
mention_count - сайта упоминают автора фотографий


Результаты по фото
------------------

POST api url ``/api/v1/album/photo_stats/``

**Описание логики метода**

Метод возвращает признак завершения обработки альбома ``album_search_done``
и для каждого фото из переданного списка ``photo_ids`` результаты по сайтам, если альбом обработан

HTTP_200
